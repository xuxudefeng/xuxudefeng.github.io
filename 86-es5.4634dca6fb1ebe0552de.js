!function(){"use strict";function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var s=0;s<n.length;s++){var i=n[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,s,i){return s&&n(e.prototype,s),i&&n(e,i),e}(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[86],{64086:function(n,i,t){t.r(i),t.d(i,{PermissionsModule:function(){return w}});var o,r=t(64313),u=t(63423),c=t(79765),a=t(46782),l=t(37716),m=t(19659),g=t(32802),p=t(42542),d=t(3679),h=t(38583),Z=((o=function(){function n(s,i){e(this,n),this.rolesSrv=s,this.permissionsSrv=i,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new c.xQ}return s(n,[{key:"ngOnInit",value:function(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe((0,a.R)(this._destroy$)).subscribe(function(e){console.log(e)}),this.permissionsSrv.permissions$.pipe((0,a.R)(this._destroy$)).subscribe(function(e){console.log(e)})}},{key:"ngOnDestroy",value:function(){this._destroy$.next(),this._destroy$.complete()}},{key:"onPermissionChange",value:function(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}]),n}()).\u0275fac=function(e){return new(e||o)(l.Y36(m.cM),l.Y36(m.YI))},o.\u0275cmp=l.Xpm({type:o,selectors:[["app-permissions-role-switching"]],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,n){1&e&&(l._UZ(0,"page-header"),l.TgZ(1,"p"),l._uU(2," The permissions management is powered by "),l.TgZ(3,"a",0),l.TgZ(4,"code"),l._uU(5,"ngx-permissions"),l.qZA(),l.qZA(),l._uU(6,".\n"),l.qZA(),l.TgZ(7,"mat-button-toggle-group",1),l.NdJ("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),l.TgZ(8,"mat-button-toggle",2),l._uU(9,"ADMIN"),l.qZA(),l.TgZ(10,"mat-button-toggle",3),l._uU(11,"MANAGER"),l.qZA(),l.TgZ(12,"mat-button-toggle",4),l._uU(13,"GUEST"),l.qZA(),l.qZA(),l.TgZ(14,"p"),l._uU(15," Your current role: "),l.TgZ(16,"code"),l._uU(17),l.ALo(18,"json"),l.qZA(),l.qZA(),l.TgZ(19,"p"),l._uU(20," Your current permissions: "),l.TgZ(21,"code"),l._uU(22),l.ALo(23,"json"),l.qZA(),l.qZA()),2&e&&(l.xp6(7),l.Q6J("ngModel",n.currentRole),l.xp6(10),l.Oqu(l.lcZ(18,3,n.currentRole)),l.xp6(5),l.Oqu(l.lcZ(23,5,n.currentPermissions)))},directives:[g.q,p.A9,d.JJ,d.On,p.Yi],pipes:[h.Ts],styles:[""]}),o),A=function(){var n=function(){function n(s,i,t){e(this,n),this.rolesSrv=s,this.permissionsSrv=i,this.router=t,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}return s(n,[{key:"ngOnInit",value:function(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}},{key:"onPermissionChange",value:function(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}}]),n}();return n.\u0275fac=function(e){return new(e||n)(l.Y36(m.cM),l.Y36(m.YI),l.Y36(u.F0))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-permissions-route-guard"]],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,n){1&e&&(l._UZ(0,"page-header"),l.TgZ(1,"p"),l._uU(2," The route will be redirected to dashboard after change permission.\n"),l.qZA(),l.TgZ(3,"mat-button-toggle-group",0),l.NdJ("ngModelChange",function(e){return n.currentRole=e})("change",function(){return n.onPermissionChange()}),l.TgZ(4,"mat-button-toggle",1),l._uU(5,"ADMIN"),l.qZA(),l.TgZ(6,"mat-button-toggle",2),l._uU(7,"MANAGER"),l.qZA(),l.TgZ(8,"mat-button-toggle",3),l._uU(9,"GUEST"),l.qZA(),l.qZA(),l.TgZ(10,"p"),l._uU(11," Your current role: "),l.TgZ(12,"code"),l._uU(13),l.ALo(14,"json"),l.qZA(),l.qZA(),l.TgZ(15,"p"),l._uU(16," Your current permissions: "),l.TgZ(17,"code"),l._uU(18),l.ALo(19,"json"),l.qZA(),l.qZA()),2&e&&(l.xp6(3),l.Q6J("ngModel",n.currentRole),l.xp6(10),l.Oqu(l.lcZ(14,3,n.currentRole)),l.xp6(5),l.Oqu(l.lcZ(19,5,n.currentPermissions)))},directives:[g.q,p.A9,d.JJ,d.On,p.Yi],pipes:[h.Ts],styles:[""]}),n}(),f=t(70218);function T(e,n){1&e&&(l.TgZ(0,"p",11),l._uU(1," I should see it only admin "),l.qZA())}function P(e,n){1&e&&(l.TgZ(0,"p",11),l._uU(1," Usage on both only and except I should see it only admin "),l.qZA())}function x(e,n){1&e&&(l.TgZ(0,"p",12),l._uU(1,"I will see it only guest"),l.qZA())}function v(e,n){1&e&&(l.TgZ(0,"p",13),l._uU(1,"I will see it except adminnnnn"),l.qZA())}function y(e,n){1&e&&(l.TgZ(0,"p",14),l._uU(1,"I should see it except admin"),l.qZA())}function b(e,n){1&e&&(l.TgZ(0,"div"),l._uU(1," Testing template\n"),l.qZA())}function q(e,n){1&e&&(l.TgZ(0,"div"),l._uU(1," Testing template\n"),l.qZA())}function U(e,n){1&e&&(l.TgZ(0,"p",15),l._uU(1,"else block"),l.qZA())}function _(e,n){1&e&&(l.TgZ(0,"p",16),l._uU(1,"then block"),l.qZA())}function O(e,n){1&e&&(l.TgZ(0,"button"),l._uU(1," This should be visible to admin or superadmin "),l.qZA())}function R(e,n){1&e&&(l.TgZ(0,"button"),l._uU(1,"WTF"),l.qZA())}var k=function(){return["admin"]},E=function(){return["guest"]},M=function(){return["adminnnnn"]},N=function(){return[]},S=[{path:"role-switching",component:Z},{path:"route-guard",component:A,canActivate:[m.DD],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:function(){var n=function(){function n(s){e(this,n),this.permissionsSrv=s,this.comparedPermission=["guest"]}return s(n,[{key:"ngOnInit",value:function(){}},{key:"getPermissions",value:function(){return Object.keys(this.permissionsSrv.getPermissions())}},{key:"addPermission",value:function(){this.permissionsSrv.addPermission("admin",function(){return new Promise(function(e,n){setTimeout(function(){return e(!0)},2e3)})})}},{key:"removePermission",value:function(){this.permissionsSrv.removePermission("admin")}},{key:"unAuthorized",value:function(){console.log("unAuthorized")}},{key:"authorized",value:function(){console.log("authorizes")}},{key:"changeToAdmin",value:function(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}},{key:"changeToAnotherPermission",value:function(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}},{key:"changeToGuest",value:function(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}}]),n}();return n.\u0275fac=function(e){return new(e||n)(l.Y36(m.YI))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-permissions-test"]],decls:39,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(e,n){if(1&e&&(l._UZ(0,"page-header"),l.TgZ(1,"mtx-alert",0),l._uU(2,"The permissions check will delay 2s."),l.qZA(),l.TgZ(3,"p"),l.TgZ(4,"button",1),l.NdJ("click",function(){return n.addPermission()}),l._uU(5,"Add Permission [ admin ]"),l.qZA(),l.TgZ(6,"button",1),l.NdJ("click",function(){return n.removePermission()}),l._uU(7,"Remove Permission [ admin ]"),l.qZA(),l.qZA(),l.YNc(8,T,2,0,"ng-template",2),l.YNc(9,P,2,0,"ng-template",3),l.YNc(10,x,2,0,"ng-template",2),l.YNc(11,v,2,0,"ng-template",4),l.NdJ("permissionsAuthorized",function(){return n.authorized()})("permissionsUnauthorized",function(){return n.unAuthorized()}),l.YNc(12,y,2,0,"ng-template",5),l.YNc(13,b,2,0,"div",6),l.YNc(14,q,2,0,"div",7),l.YNc(15,U,2,0,"ng-template",null,8,l.W1O),l.YNc(17,_,2,0,"ng-template",null,9,l.W1O),l.TgZ(19,"p"),l._uU(20," Compared permission: "),l.TgZ(21,"code"),l._uU(22),l.ALo(23,"json"),l.qZA(),l.qZA(),l.TgZ(24,"div"),l.TgZ(25,"button",1),l.NdJ("click",function(){return n.changeToAdmin()}),l._uU(26,"Change To Admin Permission"),l.qZA(),l.TgZ(27,"button",1),l.NdJ("click",function(){return n.changeToAnotherPermission()}),l._uU(28,"Change To Awesome Permission"),l.qZA(),l.TgZ(29,"button",1),l.NdJ("click",function(){return n.changeToGuest()}),l._uU(30,"Change To Guest Permission"),l.qZA(),l.qZA(),l.TgZ(31,"div"),l.YNc(32,O,2,0,"button",10),l.YNc(33,R,2,0,"button",10),l.qZA(),l.TgZ(34,"p"),l._uU(35," Your current permissions: "),l.TgZ(36,"code"),l._uU(37),l.ALo(38,"json"),l.qZA(),l.qZA()),2&e){var s=l.MAs(16),i=l.MAs(18);l.xp6(8),l.Q6J("ngxPermissionsOnly",l.DdM(20,k)),l.xp6(1),l.Q6J("ngxPermissionsOnly",l.DdM(21,k))("ngxPermissionsExcept","hhhhh"),l.xp6(1),l.Q6J("ngxPermissionsOnly",l.DdM(22,E)),l.xp6(1),l.Q6J("ngxPermissionsExcept",l.DdM(23,M)),l.xp6(1),l.Q6J("ngxPermissionsExcept",l.DdM(24,k)),l.xp6(1),l.Q6J("ngxPermissionsOnly",l.DdM(25,k))("ngxPermissionsOnlyElse",s)("ngxPermissionsOnlyThen",i),l.xp6(1),l.Q6J("ngxPermissionsExcept",l.DdM(26,k))("ngxPermissionsExceptElse",s)("ngxPermissionsExceptThen",i),l.xp6(8),l.Oqu(l.lcZ(23,16,n.comparedPermission)),l.xp6(10),l.Q6J("ngxPermissionsOnly",n.comparedPermission),l.xp6(1),l.Q6J("ngxPermissionsOnly",l.DdM(27,N)),l.xp6(4),l.Oqu(l.lcZ(38,18,n.getPermissions()))}},directives:[g.q,f.S,m.gE],pipes:[h.Ts],styles:[""]}),n}(),canActivate:[m.DD],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}],Y=function(){var n=function n(){e(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[u.Bz.forChild(S)],u.Bz]}),n}(),w=function(){var n=function n(){e(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[r.m,Y]]}),n}()}}])}();