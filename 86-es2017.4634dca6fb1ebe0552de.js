"use strict";(self.webpackChunkng_matero=self.webpackChunkng_matero||[]).push([[86],{64086:function(e,s,n){n.r(s),n.d(s,{PermissionsModule:function(){return S}});var i=n(64313),t=n(63423),o=n(79765),r=n(46782),c=n(37716),u=n(19659),m=n(32802),g=n(42542),a=n(3679),l=n(38583);let p=(()=>{class e{constructor(e,s){this.rolesSrv=e,this.permissionsSrv=s,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]},this._destroy$=new o.xQ}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions()),this.rolesSrv.roles$.pipe((0,r.R)(this._destroy$)).subscribe(e=>{console.log(e)}),this.permissionsSrv.permissions$.pipe((0,r.R)(this._destroy$)).subscribe(e=>{console.log(e)})}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions)}}return e.\u0275fac=function(s){return new(s||e)(c.Y36(u.cM),c.Y36(u.YI))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-permissions-role-switching"]],decls:24,vars:7,consts:[["href","https://github.com/AlexKhymenko/ngx-permissions","target","_blank"],[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,s){1&e&&(c._UZ(0,"page-header"),c.TgZ(1,"p"),c._uU(2," The permissions management is powered by "),c.TgZ(3,"a",0),c.TgZ(4,"code"),c._uU(5,"ngx-permissions"),c.qZA(),c.qZA(),c._uU(6,".\n"),c.qZA(),c.TgZ(7,"mat-button-toggle-group",1),c.NdJ("ngModelChange",function(e){return s.currentRole=e})("change",function(){return s.onPermissionChange()}),c.TgZ(8,"mat-button-toggle",2),c._uU(9,"ADMIN"),c.qZA(),c.TgZ(10,"mat-button-toggle",3),c._uU(11,"MANAGER"),c.qZA(),c.TgZ(12,"mat-button-toggle",4),c._uU(13,"GUEST"),c.qZA(),c.qZA(),c.TgZ(14,"p"),c._uU(15," Your current role: "),c.TgZ(16,"code"),c._uU(17),c.ALo(18,"json"),c.qZA(),c.qZA(),c.TgZ(19,"p"),c._uU(20," Your current permissions: "),c.TgZ(21,"code"),c._uU(22),c.ALo(23,"json"),c.qZA(),c.qZA()),2&e&&(c.xp6(7),c.Q6J("ngModel",s.currentRole),c.xp6(10),c.Oqu(c.lcZ(18,3,s.currentRole)),c.xp6(5),c.Oqu(c.lcZ(23,5,s.currentPermissions)))},directives:[m.q,g.A9,a.JJ,a.On,g.Yi],pipes:[l.Ts],styles:[""]}),e})(),d=(()=>{class e{constructor(e,s,n){this.rolesSrv=e,this.permissionsSrv=s,this.router=n,this.permissionsOfRole={ADMIN:["canAdd","canDelete","canEdit","canRead"],MANAGER:["canAdd","canEdit","canRead"],GUEST:["canRead"]}}ngOnInit(){this.currentRole=Object.keys(this.rolesSrv.getRoles())[0],this.currentPermissions=Object.keys(this.permissionsSrv.getPermissions())}onPermissionChange(){this.currentPermissions=this.permissionsOfRole[this.currentRole],this.rolesSrv.flushRolesAndPermissions(),this.rolesSrv.addRoleWithPermissions(this.currentRole,this.currentPermissions),this.router.navigateByUrl("/dashboard")}}return e.\u0275fac=function(s){return new(s||e)(c.Y36(u.cM),c.Y36(u.YI),c.Y36(t.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-permissions-route-guard"]],decls:20,vars:7,consts:[[3,"ngModel","ngModelChange","change"],["value","ADMIN"],["value","MANAGER"],["value","GUEST"]],template:function(e,s){1&e&&(c._UZ(0,"page-header"),c.TgZ(1,"p"),c._uU(2," The route will be redirected to dashboard after change permission.\n"),c.qZA(),c.TgZ(3,"mat-button-toggle-group",0),c.NdJ("ngModelChange",function(e){return s.currentRole=e})("change",function(){return s.onPermissionChange()}),c.TgZ(4,"mat-button-toggle",1),c._uU(5,"ADMIN"),c.qZA(),c.TgZ(6,"mat-button-toggle",2),c._uU(7,"MANAGER"),c.qZA(),c.TgZ(8,"mat-button-toggle",3),c._uU(9,"GUEST"),c.qZA(),c.qZA(),c.TgZ(10,"p"),c._uU(11," Your current role: "),c.TgZ(12,"code"),c._uU(13),c.ALo(14,"json"),c.qZA(),c.qZA(),c.TgZ(15,"p"),c._uU(16," Your current permissions: "),c.TgZ(17,"code"),c._uU(18),c.ALo(19,"json"),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("ngModel",s.currentRole),c.xp6(10),c.Oqu(c.lcZ(14,3,s.currentRole)),c.xp6(5),c.Oqu(c.lcZ(19,5,s.currentPermissions)))},directives:[m.q,g.A9,a.JJ,a.On,g.Yi],pipes:[l.Ts],styles:[""]}),e})();var h=n(70218);function Z(e,s){1&e&&(c.TgZ(0,"p",11),c._uU(1," I should see it only admin "),c.qZA())}function A(e,s){1&e&&(c.TgZ(0,"p",11),c._uU(1," Usage on both only and except I should see it only admin "),c.qZA())}function T(e,s){1&e&&(c.TgZ(0,"p",12),c._uU(1,"I will see it only guest"),c.qZA())}function P(e,s){1&e&&(c.TgZ(0,"p",13),c._uU(1,"I will see it except adminnnnn"),c.qZA())}function x(e,s){1&e&&(c.TgZ(0,"p",14),c._uU(1,"I should see it except admin"),c.qZA())}function f(e,s){1&e&&(c.TgZ(0,"div"),c._uU(1," Testing template\n"),c.qZA())}function q(e,s){1&e&&(c.TgZ(0,"div"),c._uU(1," Testing template\n"),c.qZA())}function U(e,s){1&e&&(c.TgZ(0,"p",15),c._uU(1,"else block"),c.qZA())}function _(e,s){1&e&&(c.TgZ(0,"p",16),c._uU(1,"then block"),c.qZA())}function b(e,s){1&e&&(c.TgZ(0,"button"),c._uU(1," This should be visible to admin or superadmin "),c.qZA())}function v(e,s){1&e&&(c.TgZ(0,"button"),c._uU(1,"WTF"),c.qZA())}const y=function(){return["admin"]},O=function(){return["guest"]},R=function(){return["adminnnnn"]},E=function(){return[]};const M=[{path:"role-switching",component:p},{path:"route-guard",component:d,canActivate:[u.DD],data:{permissions:{except:"GUEST",redirectTo:"/dashboard"}}},{path:"test",component:(()=>{class e{constructor(e){this.permissionsSrv=e,this.comparedPermission=["guest"]}ngOnInit(){}getPermissions(){return Object.keys(this.permissionsSrv.getPermissions())}addPermission(){this.permissionsSrv.addPermission("admin",()=>new Promise((e,s)=>{setTimeout(()=>e(!0),2e3)}))}removePermission(){this.permissionsSrv.removePermission("admin")}unAuthorized(){console.log("unAuthorized")}authorized(){console.log("authorizes")}changeToAdmin(){this.comparedPermission=["admin"],console.log(this.comparedPermission)}changeToAnotherPermission(){this.comparedPermission=["awesome"],console.log(this.comparedPermission)}changeToGuest(){this.comparedPermission=["guest"],console.log(this.comparedPermission)}}return e.\u0275fac=function(s){return new(s||e)(c.Y36(u.YI))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-permissions-test"]],decls:39,vars:28,consts:[["type","danger"],[3,"click"],["permissions","",3,"ngxPermissionsOnly"],[3,"ngxPermissionsOnly","ngxPermissionsExcept"],["permissions","",3,"ngxPermissionsExcept","permissionsAuthorized","permissionsUnauthorized"],["permissions","",3,"ngxPermissionsExcept"],[4,"ngxPermissionsOnly","ngxPermissionsOnlyElse","ngxPermissionsOnlyThen"],[4,"ngxPermissionsExcept","ngxPermissionsExceptElse","ngxPermissionsExceptThen"],["a",""],["b",""],[4,"ngxPermissionsOnly"],[1,"bg-green-500","text-white"],[1,"bg-purple-500","text-white"],[1,"bg-orange-500","text-white"],[1,"bg-indigo-500","text-white"],[1,"bg-gray-900","text-white"],[1,"bg-gray-300"]],template:function(e,s){if(1&e&&(c._UZ(0,"page-header"),c.TgZ(1,"mtx-alert",0),c._uU(2,"The permissions check will delay 2s."),c.qZA(),c.TgZ(3,"p"),c.TgZ(4,"button",1),c.NdJ("click",function(){return s.addPermission()}),c._uU(5,"Add Permission [ admin ]"),c.qZA(),c.TgZ(6,"button",1),c.NdJ("click",function(){return s.removePermission()}),c._uU(7,"Remove Permission [ admin ]"),c.qZA(),c.qZA(),c.YNc(8,Z,2,0,"ng-template",2),c.YNc(9,A,2,0,"ng-template",3),c.YNc(10,T,2,0,"ng-template",2),c.YNc(11,P,2,0,"ng-template",4),c.NdJ("permissionsAuthorized",function(){return s.authorized()})("permissionsUnauthorized",function(){return s.unAuthorized()}),c.YNc(12,x,2,0,"ng-template",5),c.YNc(13,f,2,0,"div",6),c.YNc(14,q,2,0,"div",7),c.YNc(15,U,2,0,"ng-template",null,8,c.W1O),c.YNc(17,_,2,0,"ng-template",null,9,c.W1O),c.TgZ(19,"p"),c._uU(20," Compared permission: "),c.TgZ(21,"code"),c._uU(22),c.ALo(23,"json"),c.qZA(),c.qZA(),c.TgZ(24,"div"),c.TgZ(25,"button",1),c.NdJ("click",function(){return s.changeToAdmin()}),c._uU(26,"Change To Admin Permission"),c.qZA(),c.TgZ(27,"button",1),c.NdJ("click",function(){return s.changeToAnotherPermission()}),c._uU(28,"Change To Awesome Permission"),c.qZA(),c.TgZ(29,"button",1),c.NdJ("click",function(){return s.changeToGuest()}),c._uU(30,"Change To Guest Permission"),c.qZA(),c.qZA(),c.TgZ(31,"div"),c.YNc(32,b,2,0,"button",10),c.YNc(33,v,2,0,"button",10),c.qZA(),c.TgZ(34,"p"),c._uU(35," Your current permissions: "),c.TgZ(36,"code"),c._uU(37),c.ALo(38,"json"),c.qZA(),c.qZA()),2&e){const e=c.MAs(16),n=c.MAs(18);c.xp6(8),c.Q6J("ngxPermissionsOnly",c.DdM(20,y)),c.xp6(1),c.Q6J("ngxPermissionsOnly",c.DdM(21,y))("ngxPermissionsExcept","hhhhh"),c.xp6(1),c.Q6J("ngxPermissionsOnly",c.DdM(22,O)),c.xp6(1),c.Q6J("ngxPermissionsExcept",c.DdM(23,R)),c.xp6(1),c.Q6J("ngxPermissionsExcept",c.DdM(24,y)),c.xp6(1),c.Q6J("ngxPermissionsOnly",c.DdM(25,y))("ngxPermissionsOnlyElse",e)("ngxPermissionsOnlyThen",n),c.xp6(1),c.Q6J("ngxPermissionsExcept",c.DdM(26,y))("ngxPermissionsExceptElse",e)("ngxPermissionsExceptThen",n),c.xp6(8),c.Oqu(c.lcZ(23,16,s.comparedPermission)),c.xp6(10),c.Q6J("ngxPermissionsOnly",s.comparedPermission),c.xp6(1),c.Q6J("ngxPermissionsOnly",c.DdM(27,E)),c.xp6(4),c.Oqu(c.lcZ(38,18,s.getPermissions()))}},directives:[m.q,h.S,u.gE],pipes:[l.Ts],styles:[""]}),e})(),canActivate:[u.DD],data:{permissions:{only:"ADMIN",redirectTo:"/dashboard"}}}];let N=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[t.Bz.forChild(M)],t.Bz]}),e})(),S=(()=>{class e{}return e.\u0275fac=function(s){return new(s||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.m,N]]}),e})()}}]);